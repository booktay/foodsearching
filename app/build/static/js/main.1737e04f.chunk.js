(this["webpackJsonpfoodsearching-ui"]=this["webpackJsonpfoodsearching-ui"]||[]).push([[0],{107:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),l=a.n(i),s=(a(81),a(22)),c=a(23),o=a(24),d=a(25),u=a(18),h=(a(82),a(127)),m=a(129),p=a(130),v=a(39),f=a(108),g=a(131),y=Object(h.a)((function(e){return{root:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center"},grow:{flexGrow:1},navbar:{background:"white"},link:{textDecoration:"none",color:"#1b6ca8"}}}));function E(){var e=y();return r.a.createElement("div",{className:e.root},r.a.createElement(m.a,{position:"static",className:e.navbar},r.a.createElement(p.a,null,r.a.createElement(v.a,{variant:"h5",className:e.headername},r.a.createElement(u.c,{to:"/",className:e.link},"Food Searching UI")),r.a.createElement("div",{className:e.grow}),r.a.createElement(g.a,{variant:"text","aria-label":"text primary button group"},r.a.createElement(f.a,null,r.a.createElement(u.c,{to:"/",className:e.link},"Find Review by ID")),r.a.createElement(f.a,null,r.a.createElement(u.c,{to:"/keyword",className:e.link},"Find Review by Keyword")),r.a.createElement(f.a,null,r.a.createElement(u.c,{to:"/edit",className:e.link},"Edit Review by ID"))))))}var b=a(8),x=a(21),w=a.n(x),k=a(27),S=a(7),j=a(4),O=a(137),C=a(138),N=a(69),D=a(140),I=a(132),K=a(133),B=a(37),T=a.n(B),P=a(134),H=a(135),F=a(136),R=a(42),M=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={searchID:"",reviewID:null,reviewText:null,modifiedDate:null},e.getdata=e.getdata.bind(Object(S.a)(e)),e.handleClickSearch=e.handleClickSearch.bind(Object(S.a)(e)),e.handleKeyPress=e.handleKeyPress.bind(Object(S.a)(e)),e.searchBox=e.searchBox.bind(Object(S.a)(e)),e.resultCard=e.resultCard.bind(Object(S.a)(e)),e.handleEmpty=e.handleEmpty.bind(Object(S.a)(e)),e}return Object(c.a)(a,[{key:"handleKeyPress",value:function(e){"Enter"===e.key&&(e.preventDefault(),this.handleClickSearch())}},{key:"handleClickSearch",value:function(){var e=this.state.searchID;""!==e&&/^\d+$/.test(e)?this.getdata(e):this.setState((function(e){return e.reviewID="Input Error",e.reviewText=null,e}))}},{key:"getdata",value:function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R.defaults.baseURL="http://localhost:5555",e.next=3,R.get("/reviews/"+t,{});case 3:200===(a=e.sent).status&&(a.data._source?(n=(n=new Date(a.data._source.modified/1e6)).toUTCString(),this.setState((function(e){return e.reviewID=a.data._source.reviewid,e.reviewText=a.data._source.reviewtext,e.modifiedDate=n,e}))):this.setState((function(e){return e.reviewID=a.data.Message,e.reviewText=null,e})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchBox",value:function(){var e=this,t=this.props.classes,a=this.state.searchID;return r.a.createElement(N.a,{component:"form",className:t.searchroot},r.a.createElement(D.a,{className:t.input,placeholder:"Search Food Reviews Ex. 1",value:a,onChange:function(t){return e.setState({searchID:t.target.value})},onKeyPress:this.handleKeyPress}),r.a.createElement(I.a,{className:t.divider,orientation:"vertical"}),r.a.createElement(K.a,{color:"primary",className:t.iconButton,onClick:this.handleClickSearch},r.a.createElement(T.a,null)))}},{key:"resultCard",value:function(){var e=this.props.classes,t=this.state,a=t.reviewID,n=t.reviewText,i=t.modifiedDate;return r.a.createElement(P.a,{className:e.cardroot},r.a.createElement(H.a,{title:"Review ID : "+a}),n?r.a.createElement(F.a,null,r.a.createElement(v.a,{variant:"subtitle1",gutterBottom:!0},"Review Text"),r.a.createElement(v.a,{variant:"body1",component:"p",className:e.reviewtext},n),r.a.createElement(v.a,{variant:"body2",component:"p",color:"secondary",className:e.modifieddate},"Last modified : ",i)):this.handleEmpty())}},{key:"handleEmpty",value:function(){return r.a.createElement(n.Fragment,null)}},{key:"render",value:function(){var e=this.props.classes,t=this.state.reviewID;return r.a.createElement("div",{className:e.root},r.a.createElement(O.a,null,r.a.createElement(C.a,{container:!0,spacing:3},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement("h1",null,"Search Food Review by ReviewID")),r.a.createElement(C.a,{item:!0,xs:12},this.searchBox()),r.a.createElement(C.a,{item:!0,xs:12},t?this.resultCard():this.handleEmpty()))))}}]),a}(n.Component),_=Object(j.a)((function(e){return{root:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},searchroot:{padding:"2px 4px",display:"inline-flex",alignItems:"center",width:"73vw",minHeight:"7vh"},input:{marginLeft:e.spacing(2),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},cardroot:{display:"inline-block",width:"73vw",textAlign:"left",color:"#1b6ca8"},reviewtext:{textAlign:"left",padding:"10px 20px 10px 20px",color:"#000000"},modifieddate:{textAlign:"right"}}}))(M),A=a(139),L=a(42),U=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).handleChangePage=function(t,a){e.setState((function(e){return e.page=a,e}))},e.state={searchKeyword:"",foodKeyword:null,resultDatas:null,errorMessage:null,maxScore:null,page:1,quantity:10},e.getdata=e.getdata.bind(Object(S.a)(e)),e.handleClickSearch=e.handleClickSearch.bind(Object(S.a)(e)),e.handleKeyPress=e.handleKeyPress.bind(Object(S.a)(e)),e.renderStringtoHtml=e.renderStringtoHtml.bind(Object(S.a)(e)),e.replaceKeywordString=e.replaceKeywordString.bind(Object(S.a)(e)),e.searchBox=e.searchBox.bind(Object(S.a)(e)),e.resultCard=e.resultCard.bind(Object(S.a)(e)),e.totalCard=e.totalCard.bind(Object(S.a)(e)),e.handleEmpty=e.handleEmpty.bind(Object(S.a)(e)),e.handlePagination=e.handlePagination.bind(Object(S.a)(e)),e.handleHasresult=e.handleHasresult.bind(Object(S.a)(e)),e.handleNoresult=e.handleNoresult.bind(Object(S.a)(e)),e}return Object(c.a)(a,[{key:"handleKeyPress",value:function(e){"Enter"===e.key&&(e.preventDefault(),this.handleClickSearch())}},{key:"handleClickSearch",value:function(){var e=this.state.searchKeyword;""!==e?this.getdata(e):this.setState((function(e){return e.errorMessage="Input new keyword",e}))}},{key:"getdata",value:function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L.defaults.baseURL="http://localhost:5555",e.next=3,L.get("/reviews",{params:{query:t}});case 3:200===(a=e.sent).status&&(a.data.hits?this.setState((function(e){return e.foodKeyword=t,e.maxScore=a.data.max_score,e.resultDatas=a.data.hits,e.quantity=a.data.total.value,e.errorMessage=null,e})):this.setState((function(e){return e.errorMessage=a.data.message,e.resultDatas=null,e})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"renderStringtoHtml",value:function(e){var t=this.props.classes,a=e.join(" ").split("<keyword>").join('<b style="color:#1b6ca8; font-weight: bold;">');return a=a.split("</keyword>").join("</b>"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:a},className:t.reviewtext})}},{key:"replaceKeywordString",value:function(e){var t=this.props.classes,a=this.state.foodKeyword,n=e.split(a).join('<b style="color:#1b6ca8; font-weight: bold;">'+a+"</b>");return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:n},className:t.reviewtext})}},{key:"searchBox",value:function(){var e=this,t=this.props.classes,a=this.state.searchKeyword;return r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(N.a,{component:"form",className:t.searchroot},r.a.createElement(D.a,{className:t.input,placeholder:"Search Food Reviews Ex. \u0e02\u0e49\u0e32\u0e27\u0e21\u0e31\u0e19\u0e44\u0e01\u0e48 \u0e40\u0e19\u0e37\u0e49\u0e2d\u0e19\u0e48\u0e2d\u0e07 \u0e15\u0e31\u0e1a\u0e40\u0e04\u0e23\u0e37\u0e48\u0e2d\u0e07\u0e43\u0e19",value:a,onChange:function(t){return e.setState({searchKeyword:t.target.value})},onKeyPress:this.handleKeyPress}),r.a.createElement(I.a,{className:t.divider,orientation:"vertical"}),r.a.createElement(K.a,{color:"primary",className:t.iconButton,"aria-label":"directions",onClick:this.handleClickSearch},r.a.createElement(T.a,null))))}},{key:"totalCard",value:function(){var e=this.props.classes,t=this.state,a=t.foodKeyword,i=t.maxScore;return r.a.createElement(n.Fragment,null,r.a.createElement(C.a,{item:!0,xs:6,className:e.cardTotalroot},r.a.createElement(P.a,null,r.a.createElement(F.a,{className:e.cardTotalcontent},r.a.createElement(v.a,{variant:"subtitle1",gutterBottom:!0},"Food Keyword : ",a)))),r.a.createElement(C.a,{item:!0,xs:6,className:e.cardTotalroot},r.a.createElement(P.a,null,r.a.createElement(F.a,{className:e.cardTotalcontent},r.a.createElement(v.a,{variant:"subtitle1",gutterBottom:!0},"Max Similarity Score : ",i)))))}},{key:"resultCard",value:function(e){var t=this.props.classes,a=e._source,n=e._score,i=a.reviewid,l=e._source.reviewtext,s=e.highlight.reviewtext,c=new Date(a.modified/1e6);return c=c.toUTCString(),r.a.createElement(C.a,{item:!0,xs:12,key:i},r.a.createElement(P.a,{className:t.cardroot},r.a.createElement(H.a,{title:"Review ID : "+i,subheader:"Similarity Score : "+n}),r.a.createElement(F.a,{className:t.cardcontent},r.a.createElement(v.a,{variant:"subtitle1",gutterBottom:!0},"Similarity Text"),r.a.createElement(v.a,{variant:"body1",component:"span"},this.renderStringtoHtml(s)),r.a.createElement(v.a,{variant:"subtitle1",gutterBottom:!0},"Full Text"),r.a.createElement(v.a,{variant:"body1",component:"span"},this.replaceKeywordString(l)),r.a.createElement(v.a,{variant:"body2",component:"p",color:"secondary",className:t.modifieddate},"Last modified : ",c))))}},{key:"handlePagination",value:function(){var e=this.props.classes,t=this.state.page,a=this.state.quantity;return a>100&&(a=100),a=Math.ceil(a/10),r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(A.a,{count:a,size:"large",className:e.paginationroot,page:t,onChange:this.handleChangePage}))}},{key:"handleHasresult",value:function(){var e=this,t=this.state,a=t.resultDatas,i=t.page;return r.a.createElement(n.Fragment,null,this.totalCard(),this.handlePagination(),a.slice(10*(i-1),10*i).map((function(t){return e.resultCard(t)})),this.handlePagination())}},{key:"handleNoresult",value:function(){var e=this.props.classes,t=this.state.errorMessage;return r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(P.a,{className:e.cardroot},r.a.createElement(H.a,{title:"Error Message : "+t})))}},{key:"handleEmpty",value:function(){return r.a.createElement(n.Fragment,null)}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.resultDatas,n=t.errorMessage;return r.a.createElement("div",{className:e.root},r.a.createElement(O.a,null,r.a.createElement(C.a,{container:!0,spacing:3},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement("h1",null,"Search Top 100 Food Reviews by Matching a Keyword")),this.searchBox(),a&&!n?this.handleHasresult():this.handleEmpty(),!a&&n?this.handleNoresult():this.handleEmpty())))}}]),a}(n.Component),G=Object(j.a)((function(e){return{root:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},grow:{flexGrow:1},searchroot:{padding:"2px 4px",display:"inline-flex",alignItems:"center",width:"73vw",minHeight:"7vh"},input:{marginLeft:e.spacing(2),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},cardTotalroot:{display:"inline-block",width:"20vw",minHeight:"10vh",textAlign:"left",color:"#1b6ca8"},cardTotalcontent:{paddingBottom:"24px"},cardroot:{display:"inline-block",width:"73vw",textAlign:"left",color:"#1b6ca8"},cardcontent:{paddingTop:0},reviewtext:{textAlign:"left",padding:"10px 20px 10px 20px",color:"#000000"},modifieddate:{textAlign:"right"},paginationroot:{display:"inline-flex"}}}))(U),q=a(68),W=a.n(q),$=a(42),J=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={searchID:"",modifiedText:""},e.editdata=e.editdata.bind(Object(S.a)(e)),e.handleClickSearch=e.handleClickSearch.bind(Object(S.a)(e)),e.handleKeyPress=e.handleKeyPress.bind(Object(S.a)(e)),e.searchBox=e.searchBox.bind(Object(S.a)(e)),e.inputBox=e.inputBox.bind(Object(S.a)(e)),e.handleEmpty=e.handleEmpty.bind(Object(S.a)(e)),e}return Object(c.a)(a,[{key:"handleClickSearch",value:function(){var e=this.state,t=e.searchID,a=e.modifiedText;""!==t&&/^\d+$/.test(t)&&""!==a?this.editdata(t,a):alert("Input Error")}},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&(e.preventDefault(),this.handleClickSearch())}},{key:"editdata",value:function(){var e=Object(k.a)(w.a.mark((function e(t,a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $.defaults.baseURL="http://localhost:5555",e.next=3,$.put("/reviews/"+t,a,{});case 3:200===(n=e.sent).status&&("updated"===n.data.result&&n.data.id?alert("Update Successful"):alert("Update Unsuccessful"));case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"searchBox",value:function(){var e=this,t=this.props.classes,a=this.state.searchID;return r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(N.a,{component:"form",className:t.searchroot},r.a.createElement(D.a,{className:t.input,placeholder:"Search Food Reviews Ex. 1",value:a,onChange:function(t){return e.setState({searchID:t.target.value})},onKeyPress:this.handleKeyPress}),r.a.createElement(I.a,{className:t.divider,orientation:"vertical"}),r.a.createElement(K.a,{color:"primary",className:t.iconButton,onClick:this.handleClickSearch},r.a.createElement(W.a,null))))}},{key:"inputBox",value:function(){var e=this,t=this.props.classes,a=this.state.modifiedText;return r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement(N.a,{component:"form",className:t.searchroot},r.a.createElement(D.a,{className:t.input,placeholder:"Input Text Here",value:a,multiline:!0,fullWidth:!0,rows:10,rowsMax:10,onChange:function(t){return e.setState({modifiedText:t.target.value})},onKeyPress:this.handleKeyPress})))}},{key:"handleEmpty",value:function(){return r.a.createElement(n.Fragment,null)}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.root},r.a.createElement(O.a,null,r.a.createElement(C.a,{container:!0,spacing:3},r.a.createElement(C.a,{item:!0,xs:12},r.a.createElement("h1",null,"Edit Food Review by reviewID")),this.searchBox(),this.inputBox())))}}]),a}(n.Component),z=Object(j.a)((function(e){return{root:{flexGrow:1,display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh"},searchroot:{padding:"2px 4px",display:"inline-flex",alignItems:"center",width:"73vw",minHeight:"7vh"},input:{marginLeft:e.spacing(2),flex:1},iconButton:{padding:10},divider:{height:28,margin:4},cardroot:{display:"inline-block",width:"73vw",textAlign:"left",color:"#1b6ca8"},reviewtext:{textAlign:"left",padding:"10px 20px 10px 20px",color:"#000000"},modifieddate:{textAlign:"right"},textfield:{backgroundColor:"white"}}}))(J);function Q(){return r.a.createElement(b.b,null,r.a.createElement(u.b,{path:"/keyword"},r.a.createElement(G,null)),r.a.createElement(u.b,{path:"/edit"},r.a.createElement(z,null)),r.a.createElement(u.b,{path:"/"},r.a.createElement(_,null)))}var V=function(e){Object(d.a)(a,e);var t=Object(o.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,null,r.a.createElement(E,null),r.a.createElement(Q,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},76:function(e,t,a){e.exports=a(107)},81:function(e,t,a){},82:function(e,t,a){}},[[76,1,2]]]);
//# sourceMappingURL=main.1737e04f.chunk.js.map